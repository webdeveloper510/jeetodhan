let $mo=jQuery;function preventSubmitButton(o,e,t,s){$mo(o).click((function(m){m.preventDefault(),$mo("#mo_message"+t+s).empty(),$mo("#mo_message"+t+s).append(img),$mo("#mo_message"+t+s).hide();var n=e.val();$mo.ajax({url:customform.siteURL,type:"POST",data:{user_phone:n,otpType:t,action:customform.saction},crossDomain:!0,dataType:"json",success:function(e){"success"==e.result?$mo(o).unbind("click").click():($mo("#mo_message"+t+s).empty(),$mo("#mo_message"+t+s).show(),$mo("#mo_message"+t+s).append(e.message),$mo("#mo_message"+t+s).css({"background-color":"#ffefef",color:"#ff5b5b"}),$mo("#mo_message"+t+s).focus().keyup())},error:function(o){}})}))}function moAjaxInitializer(o,e,t,s,m,n,a){addButtonAndFieldsCustomForm(o,e,t,s,m,n,a),bindSendOTPButtonCustomForm(o,e,t,s,m,n,a),bindVerifyButtonCustomForm(o,e,t,s,m,n,a),addValidatedIconCustomForm()}function addValidatedIconCustomForm(){setTimeout((function(){$mo(".mo-validated+.mo-validated-icon").length||$mo('<span class="dashicons dashicons-yes mo-validated-icon"></span>').insertAfter(".mo-validated")}),250)}function is_already_verified(o,e,t,s,m,n,a){a.validated[n]&&(o.find("#mo_send_otp_"+n+e).attr("disabled",!0).hide(),s.addClass("mo-validated"))}function addButtonAndFieldsCustomForm(o,e,t,s,m,n,a){let i='<div id="mo_verify_field_container'+n+e+'" style="display:none;" class="row mo_verify_field_container"><div class="col-sm-12  single"><div data-field-wrapper="'+t+'" class="form-group" id="'+n+e+'-wrap"><label id="'+n+e+'Label" for="'+n+e+'" class="control-label">'+a.fieldText+'<span class="mo-field-message" style="color:#ee0000;">*</span></label><div class=""><input class=" form-control" id="mo_verify_otp_'+n+e+'" name="mo_verify_otp_'+n+e+'" value="" placeholder="Enter OTP Here" style="width:100%;"></div></div></div></div>';$mo('<div id = "mo_send_otp_button-container'+n+e+'" class = "mo_send_otp_button-container" ><input  type = "button" name = "mo_send_otp_'+n+e+'" class = "btn btn-default mo_send_otp_button" id = "mo_send_otp_'+n+e+'" value = "'+a.buttontext+'"/></div ><div  class="mo_message_box" id="mo_message'+n+e+'" ></div>'+i+'<div id = "mo_verify_otp_button-container'+n+e+'" style="display:none;" class = "mo_verify_otp_button-container" ><input  type = "button" name = "mo_verify_button_'+n+e+'" class = "btn btn-default mo_verify_otp_button" style="margin-top:5px;" id = "mo_verify_button_'+n+e+'"  value = "Verify OTP"/></div >').insertAfter(m)}function bindSendOTPButtonCustomForm(o,e,t,s,m,n,a){img="<img alt='' src='"+a.imgURL+"'>",$mo("#mo_send_otp_"+n+e).click((function(){var o=s.val();$mo("#mo_message"+n+e).empty(),$mo("#mo_message"+n+e).append(img),$mo("#mo_message"+n+e).show(),disableOTPButton(),$mo.ajax({url:a.siteURL,type:"POST",data:{user_email:o,user_phone:o,otpType:n,action:a.gaction,nonce:a.gnonce},crossDomain:!0,dataType:"json",success:function(o){"success"===o.result?(disableOTPButton(),$mo("#mo_message"+n+e).empty(),$mo("#mo_message"+n+e).append("An One Time Passcode has been sent successfully.<br><b>Please note this is only a trial version and is not fully compatible.</b>"),$mo("#mo_message"+n+e).css({"background-color":"#dbfff7",color:"#008f6e"}),$mo("#mo_verify_otp_button-container"+n+e).show(),$mo("#mo_verify_field_container"+n+e).show()):(disableOTPButton(),$mo("#mo_message"+n+e).empty(),$mo("#mo_message"+n+e).append(o.message),$mo("#mo_message"+n+e).css({"background-color":"#ffefef",color:"#ff5b5b"}))},error:function(o){}})}))}function bindVerifyButtonCustomForm(o,e,t,s,m,n,a){img="<img alt='' src='"+a.imgURL+"'>",$mo("#mo_verify_button_"+n+e).click((function(){var o=$mo("#mo_verify_otp_"+n+e).val(),t=s.val();$mo("#mo_message"+n+e).empty(),$mo("#mo_message"+n+e).append(img),$mo("#mo_message"+n+e).show(),$mo.ajax({url:a.siteURL,type:"POST",data:{user_email:t,user_phone:t,otp_token:o,otpType:n,action:a.vaction,nonce:a.gnonce},crossDomain:!0,dataType:"json",success:function(o){"success"===o.result?($mo("#mo_message"+n+e).hide(),$mo("#mo_verify_otp_button-container"+n+e).hide(),$mo("#mo_verify_field_container"+n+e).hide(),$mo("#mo_send_otp_"+n+e).val("Resend OTP"),s.addClass("mo-validated"),s.focus().keyup(),addValidatedIcon()):($mo("#mo_message"+n+e).empty(),$mo("#mo_message"+n+e).append(o.message),$mo("#mo_message"+n+e).css({"background-color":"#ffefef",color:"#ff5b5b"}))},error:function(o){}})}))}function disableOTPButton(){$mo.isFunction(window.moDisableOTPbutton)&&moDisableOTPbutton()}jQuery(document).ready((function(){let o=customform.otpType,e=customform.fieldSelector.includes(".")?$mo(customform.fieldSelector.replace(/ /g,".")):$mo(customform.fieldSelector),t=customform.submitSelector.includes(".")?$mo(customform.submitSelector.replace(/ /g,".")):$mo(customform.submitSelector),s=$mo(t).closest("form");void 0===s&&(s=$mo(e).closest("form"));let m=$mo(s),n=$mo(customform.fieldSelector);m.find(n).length>0&&m.find(t).length>0&&(moAjaxInitializer(m,"1","phone",e,n,o,customform),preventSubmitButton(t,e,o,"1"))}));