let $mo=jQuery;function preventSubmitButton(o,e,t,s){$mo(o).click((function(m){m.preventDefault(),$mo("#mo_message"+t+s).empty(),$mo("#mo_message"+t+s).append(img),$mo("#mo_message"+t+s).hide();var n=e.val();$mo.ajax({url:customForm.siteURL,type:"POST",data:{user_phone:n,otpType:t,action:customForm.saction},crossDomain:!0,dataType:"json",success:function(e){"success"==e.result?$mo(o).unbind("click").click():($mo("#mo_message"+t+s).empty(),$mo("#mo_message"+t+s).show(),$mo("#mo_message"+t+s).append(e.message),$mo("#mo_message"+t+s).css("border-top","3px solid red"),$mo("#mo_message"+t+s).focus().keyup())},error:function(o){}})}))}function moAjaxInitializer(o,e,t,s,m,n,i){addButtonAndFields(o,e,t,s,m,n,i),bindSendOTPButton(o,e,t,s,m,n,i),bindVerifyButton(o,e,t,s,m,n,i),addValidatedIcon()}function addValidatedIcon(){setTimeout((function(){$mo(".mo-validated+.mo-validated-icon").length||$mo('<span class="dashicons dashicons-yes mo-validated-icon"></span>').insertAfter(".mo-validated")}),250)}function is_already_verified(o,e,t,s,m,n,i){i.validated[n]&&(o.find("#mo_send_otp_"+n+e).attr("disabled",!0).hide(),s.addClass("mo-validated"))}function addButtonAndFields(o,e,t,s,m,n,i){let a='<div  class="mo_message_box" id="mo_message'+n+e+'" ></div>',d='<div id="mo_verify_field_container'+n+e+'" style="display:none;" class="row mo_verify_field_container"><div class="col-sm-12  single"><div data-field-wrapper="'+t+'" class="form-group" id="'+n+e+'-wrap"><label id="'+n+e+'Label" for="'+n+e+'" class="control-label">'+i.fieldText+'<span class="mo-field-message" style="color:#ee0000;">*</span></label><div class=""><input class=" form-control" id="mo_verify_otp_'+n+e+'" name="mo_verify_otp_'+n+e+'" value=""></div></div></div></div>',l='<div id = "mo_verify_otp_button-container'+n+e+'" style="display:none;" class = "mo_verify_otp_button-container" ><input  type = "button" name = "mo_verify_button_'+n+e+'" class = "btn btn-default mo_verify_otp_button"  id = "mo_verify_button_'+n+e+'"  value = "Verify OTP"/></div >',c='<div id = "mo_send_otp_button-container'+n+e+'" class = "mo_send_otp_button-container" ><input  type = "button" name = "mo_send_otp_'+n+e+'" class = "btn btn-default mo_send_otp_button" id = "mo_send_otp_'+n+e+'" value = "'+i.buttontext+'"/></div >';$mo(c+a+d+l).insertAfter(m)}function bindSendOTPButton(o,e,t,s,m,n,i){img="<img alt='' src='"+i.imgURL+"'>",$mo("#mo_send_otp_"+n+e).click((function(){var o=s.val();$mo("#mo_message"+n+e).empty(),$mo("#mo_message"+n+e).append(img),$mo("#mo_message"+n+e).show(),disableOTPButton(),$mo.ajax({url:i.siteURL,type:"POST",data:{user_email:o,user_phone:o,otpType:n,action:i.gaction},crossDomain:!0,dataType:"json",success:function(o){"success"===o.result?(disableOTPButton(),$mo("#mo_message"+n+e).empty(),$mo("#mo_message"+n+e).append("An One Time Passcode has been sent successfully.<br><b>Please note this is only a trial version and is not fully compatible.</b>"),$mo("#mo_message"+n+e).css("border-top","3px solid green"),$mo("#mo_verify_otp_button-container"+n+e).show(),$mo("#mo_verify_field_container"+n+e).show()):(disableOTPButton(),$mo("#mo_message"+n+e).empty(),$mo("#mo_message"+n+e).append(o.message),$mo("#mo_message"+n+e).css("border-top","3px solid red"))},error:function(o){}})}))}function bindVerifyButton(o,e,t,s,m,n,i){img="<img alt='' src='"+i.imgURL+"'>",$mo("#mo_verify_button_"+n+e).click((function(){var o=$mo("#mo_verify_otp_"+n+e).val(),t=s.val();$mo("#mo_message"+n+e).empty(),$mo("#mo_message"+n+e).append(img),$mo("#mo_message"+n+e).show(),$mo.ajax({url:i.siteURL,type:"POST",data:{user_email:t,user_phone:t,otp_token:o,otpType:n,action:i.vaction},crossDomain:!0,dataType:"json",success:function(o){"success"===o.result?($mo("#mo_message"+n+e).hide(),$mo("#mo_verify_otp_button-container"+n+e).hide(),$mo("#mo_verify_field_container"+n+e).hide(),$mo("#mo_send_otp_"+n+e).val("Resend OTP"),s.addClass("mo-validated"),s.focus().keyup(),addValidatedIcon()):($mo("#mo_message"+n+e).empty(),$mo("#mo_message"+n+e).append(o.message),$mo("#mo_message"+n+e).css("border-top","3px solid red"))},error:function(o){}})}))}function disableOTPButton(){$mo.isFunction(window.moDisableOTPbutton)&&moDisableOTPbutton()}jQuery(document).ready((function(){let o=customForm.otpType,e=customForm.fieldSelector.includes(".")?$mo(customForm.fieldSelector.replace(/ /g,".")):$mo(customForm.fieldSelector),t=customForm.submitSelector.includes(".")?$mo(customForm.submitSelector.replace(/ /g,".")):$mo(customForm.submitSelector),s=$mo(t).closest("form");void 0===s&&(s=$mo(e).closest("form"));let m=$mo(s),n=$mo(customForm.fieldSelector);m.find(n).length>0&&m.find(t).length>0&&(moAjaxInitializer(m,"1","phone",e,n,o,customForm),preventSubmitButton(t,e,o,"1"))}));